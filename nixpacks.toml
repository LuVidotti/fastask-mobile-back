# Nixpacks Configuration for Fastask Backend

[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
cmds = ["npm ci"]

[phases.build]
cmds = [
    "npm run clean",
    "npx prisma generate",
    "npx tsc"
]

[start]
cmd = "node dist/server.js"

[variables]
NODE_ENV = "production"

[healthcheck]
cmd = "curl -f http://localhost:$PORT/health || exit 1"
interval = "30s"
timeout = "5s"
retries = 3
start_period = "20s"
